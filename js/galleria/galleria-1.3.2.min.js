!function(t,e,i){var n=this,a=n.document,r=t(a),o=t(n),s=Array.prototype,l=1.32,c=true,u=3e4,h=false,f=navigator.userAgent.toLowerCase(),d=n.location.hash.replace(/#\//,""),p=n.location.protocol,g=Math,m=function(){},v=function(){return false},y=function(){var t=3,e=a.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->"}while(n[0]);return t>4?t:i}(),b=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName("head")[0],title:a.title}},_=n.parent!==n.self,w="data ready thumbnail loadstart loadfinish image play pause progress "+"fullscreen_enter fullscreen_exit idle_enter idle_exit rescale "+"lightbox_open lightbox_close lightbox_image",x=function(){var e=[];t.each(w.split(" "),function(t,i){e.push(i);if(/_/.test(i)){e.push(i.replace(/_/g,""))}});return e}(),T=function(e){var i;if(typeof e!=="object"){return e}t.each(e,function(n,a){if(/^[a-z]+_/.test(n)){i="";t.each(n.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e});e[i]=a;delete e[n]}});return e},k=function(i){if(t.inArray(i,x)>-1){return e[i.toUpperCase()]}return i},C={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return p+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(t){return t.entry.media$group.media$thumbnail[2].url},get_image:function(t){if(t.entry.yt$hd){return p+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg"}return t.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return p+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return p+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},S=function(e,i){for(var n=0;n<C._inst.length;n++){if(C._inst[n].id===i&&C._inst[n].type==e){return C._inst[n]}}this.type=e;this.id=i;this.readys=[];C._inst.push(this);var a=this;t.extend(this,C[e]);t.getJSON(this.getUrl(),function(e){a.data=e;t.each(a.readys,function(t,e){e(a.data)});a.readys=[]});this.getMedia=function(t,e,i){i=i||m;var n=this;var a=function(i){e(n["get_"+t](i))};try{if(n.data){a(n.data)}else{n.readys.push(a)}}catch(r){i()}}},I=function(t){var e;for(var i in C){e=t&&C[i].reg&&t.match(C[i].reg);if(e&&e.length){return{id:e[2],provider:i}}}return false},E={support:function(){var t=b().html;return!_&&(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:m,enter:function(t,e,i){this.instance=t;this.callback=e||m;i=i||b().html;if(i.requestFullscreen){i.requestFullscreen()}else if(i.mozRequestFullScreen){i.mozRequestFullScreen()}else if(i.webkitRequestFullScreen){i.webkitRequestFullScreen()}},exit:function(t){this.callback=t||m;if(a.exitFullscreen){a.exitFullscreen()}else if(a.mozCancelFullScreen){a.mozCancelFullScreen()}else if(a.webkitCancelFullScreen){a.webkitCancelFullScreen()}},instance:null,listen:function(){if(!this.support){return}var t=function(){if(!E.instance){return}var t=E.instance._fullscreen;if(a.fullscreen||a.mozFullScreen||a.webkitIsFullScreen){t._enter(E.callback)}else{t._exit(E.callback)}};a.addEventListener("fullscreenchange",t,false);a.addEventListener("mozfullscreenchange",t,false);a.addEventListener("webkitfullscreenchange",t,false)}},A=[],D=[],L=false,$=false,P=[],z=function(i){e.theme=i;t.each(P,function(t,e){if(!e._initialized){e._init.call(e)}});P=[]},H=function(){return{clearTimer:function(i){t.each(e.get(),function(){this.clearTimer(i)})},addTimer:function(i){t.each(e.get(),function(){this.addTimer(i)})},array:function(t){return s.slice.call(t,0)},create:function(t,e){e=e||"div";var i=a.createElement(e);i.className=t;return i},removeFromArray:function(e,i){t.each(e,function(t,n){if(n==i){e.splice(t,1);return false}});return e},getScriptPath:function(e){e=e||t("script:last").attr("src");var i=e.split("/");if(i.length==1){return""}i.pop();return i.join("/")+"/"},animate:function(){var i=function(t){var e="transition WebkitTransition MozTransition OTransition".split(" "),i;if(n.opera){return false}for(i=0;e[i];i++){if(typeof t[e[i]]!=="undefined"){return e[i]}}return false}((a.body||a.documentElement).style);var r={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[i];var o={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};var s=function(e,i,n){var a={};n=n||"transition";t.each("webkit moz ms o".split(" "),function(){a["-"+this+"-"+n]=i});e.css(a)};var l=function(t){s(t,"none","transition");if(e.WEBKIT&&e.TOUCH){s(t,"translate3d(0,0,0)","transform");if(t.data("revert")){t.css(t.data("revert"));t.data("revert",null)}}};var c,u,h,f,d,p,g;return function(a,v,y){y=t.extend({duration:400,complete:m,stop:false},y);a=t(a);if(!y.duration){a.css(v);y.complete.call(a[0]);return}if(!i){a.animate(v,y);return}if(y.stop){a.unbind(r);l(a)}c=false;t.each(v,function(t,e){g=a.css(t);if(H.parseValue(g)!=H.parseValue(e)){c=true}a.css(t,g)});if(!c){n.setTimeout(function(){y.complete.call(a[0])},y.duration);return}u=[];h=y.easing in o?o[y.easing]:o._default;f=" "+y.duration+"ms"+" cubic-bezier("+h.join(",")+")";n.setTimeout(function(i,n,a,r){return function(){i.one(n,function(t){return function(){l(t);y.complete.call(t[0])}}(i));if(e.WEBKIT&&e.TOUCH){d={};p=[0,0,0];t.each(["left","top"],function(t,e){if(e in a){p[t]=H.parseValue(a[e])-H.parseValue(i.css(e))+"px";d[e]=a[e];delete a[e]}});if(p[0]||p[1]){i.data("revert",d);u.push("-webkit-transform"+r);s(i,"translate3d("+p.join(",")+")","transform")}}t.each(a,function(t,e){u.push(t+r)});s(i,u.join(","));i.css(a)}}(a,r,v,f),2)}}(),removeAlpha:function(t){if(t instanceof jQuery){t=t[0]}if(y<9&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||"";if(/alpha/.test(n)){e.filter=n.replace(/alpha\([^)]*\)/i,"")}}},forceStyles:function(e,i){e=t(e);if(e.attr("style")){e.data("styles",e.attr("style")).removeAttr("style")}e.css(i)},revertStyles:function(){t.each(H.array(arguments),function(e,i){i=t(i);i.removeAttr("style");i.attr("style","");if(i.data("styles")){i.attr("style",i.data("styles")).data("styles",null)}})},moveOut:function(t){H.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){H.revertStyles.apply(H,H.array(arguments))},hide:function(e,i,n){n=n||m;var a=t(e);e=a[0];if(!a.data("opacity")){a.data("opacity",a.css("opacity"))}var r={opacity:0};if(i){var o=y<9&&e?function(){H.removeAlpha(e);e.style.visibility="hidden";n.call(e)}:n;H.animate(e,r,{duration:i,complete:o,stop:true})}else{if(y<9&&e){H.removeAlpha(e);e.style.visibility="hidden"}else{a.css(r)}}},show:function(e,i,n){n=n||m;var a=t(e);e=a[0];var r=parseFloat(a.data("opacity"))||1,o={opacity:r};if(i){if(y<9){a.css("opacity",0);e.style.visibility="visible"}var s=y<9&&e?function(){if(o.opacity==1){H.removeAlpha(e)}n.call(e)}:n;H.animate(e,o,{duration:i,complete:s,stop:true})}else{if(y<9&&o.opacity==1&&e){H.removeAlpha(e);e.style.visibility="visible"}else{a.css(o)}}},wait:function(i){e._waiters=e._waiters||[];i=t.extend({until:v,success:m,error:function(){e.raise("Could not complete wait function.")},timeout:3e3},i);var a=H.timestamp(),r,o,s,l=function(){o=H.timestamp();r=o-a;H.removeFromArray(e._waiters,s);if(i.until(r)){i.success();return false}if(typeof i.timeout=="number"&&o>=a+i.timeout){i.error();return false}e._waiters.push(s=n.setTimeout(l,10))};e._waiters.push(s=n.setTimeout(l,10))},toggleQuality:function(t,e){if(y!==7&&y!==8||!t||t.nodeName.toUpperCase()!="IMG"){return}if(typeof e==="undefined"){e=t.style.msInterpolationMode==="nearest-neighbor"}t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor"},insertStyleTag:function(e,i){if(i&&t("#"+i).length){return}var n=a.createElement("style");if(i){n.id=i}b().head.appendChild(n);if(n.styleSheet){n.styleSheet.cssText=e}else{var r=a.createTextNode(e);n.appendChild(r)}},loadScript:function(e,i){var n=false,a=t("<scr"+"ipt>").attr({src:e,async:true}).get(0);a.onload=a.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){n=true;a.onload=a.onreadystatechange=null;if(typeof i==="function"){i.call(this,this)}}};b().head.appendChild(a)},parseValue:function(t){if(typeof t==="number"){return t}else if(typeof t==="string"){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?e.join("")*1:0}else{return 0}},timestamp:function(){return(new Date).getTime()},loadCSS:function(n,r,o){var s,l;t("link[rel=stylesheet]").each(function(){if(new RegExp(n).test(this.href)){s=this;return false}});if(typeof r==="function"){o=r;r=i}o=o||m;if(s){o.call(s,s);return s}l=a.styleSheets.length;if(t("#"+r).length){t("#"+r).attr("href",n);l--}else{s=t("<link>").attr({rel:"stylesheet",href:n,id:r}).get(0);var c=t('link[rel="stylesheet"], style');if(c.length){c.get(0).parentNode.insertBefore(s,c[0])}else{b().head.appendChild(s)}if(y&&l>=31){e.raise("You have reached the browser stylesheet limit (31)",true);return}}if(typeof o==="function"){var u=t("<s>").attr("id","galleria-loader").hide().appendTo(b().body);H.wait({until:function(){return u.height()==1},success:function(){u.remove();o.call(s,s)},error:function(){u.remove();e.raise("Theme CSS could not load after 20 sec. "+(e.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),true)},timeout:5e3})}return s}}}(),O=function(e){var i=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;"+"margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}"+".galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;"+"border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";H.insertStyleTag(i,"galleria-videoicon");return t(H.create("galleria-videoicon")).html("<i></i>").appendTo(e).click(function(){t(this).siblings("img").mouseup()})},F=function(){var e=function(e,i,n,a){var r=this.getOptions("easing"),o=this.getStageWidth(),s={left:o*(e.rewind?-1:1)},l={left:0};if(n){s.opacity=0;l.opacity=1}else{s.opacity=1}t(e.next).css(s);H.animate(e.next,l,{duration:e.speed,complete:function(t){return function(){i();t.css({left:0})}}(t(e.next).add(e.prev)),queue:false,easing:r});if(a){e.rewind=!e.rewind}if(e.prev){s={left:0};l={left:o*(e.rewind?1:-1)};if(n){s.opacity=1;l.opacity=0}t(e.prev).css(s);H.animate(e.prev,l,{duration:e.speed,queue:false,easing:r,complete:function(){t(this).css("opacity",0)}})}};return{active:false,init:function(t,e,i){if(F.effects.hasOwnProperty(t)){F.effects[t].call(this,e,i)}},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0});H.animate(e.next,{opacity:1},{duration:e.speed,complete:i});if(e.prev){t(e.prev).css("opacity",1).show();H.animate(e.prev,{opacity:0},{duration:e.speed})}},flash:function(e,i){t(e.next).css({opacity:0,left:0});if(e.prev){H.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}})}else{H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}},pulse:function(e,i){if(e.prev){t(e.prev).hide()}t(e.next).css({opacity:0,left:0}).show();H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,i){e.apply(this,H.array(arguments))},fadeslide:function(t,i){e.apply(this,H.array(arguments).concat([true]))},doorslide:function(t,i){e.apply(this,H.array(arguments).concat([false,true]))}}}}();E.listen();o.bind("orientationchange",function(){t(this).resize()});e=n.Galleria=function(){var s=this;this._options={};this._playing=false;this._playtime=5e3;this._active=null;this._queue={length:0};this._data=[];this._dom={};this._thumbnails=[];this._layers=[];this._initialized=false;this._firstrun=false;this._stageWidth=0;this._stageHeight=0;this._target=i;this._binds=[];this._id=parseInt(g.random()*1e4,10);var l="container stage images image-nav image-nav-left image-nav-right "+"info info-text info-title info-description "+"thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right "+"loader counter tooltip",c="current total";t.each(l.split(" "),function(t,e){s._dom[e]=H.create("galleria-"+e)});t.each(c.split(" "),function(t,e){s._dom[e]=H.create("galleria-"+e,"span")});var u=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:false,press:function(t){var e=t.keyCode||t.which;if(e in u.map&&typeof u.map[e]==="function"){u.map[e].call(s,t)}},attach:function(t){var e,i;for(e in t){if(t.hasOwnProperty(e)){i=e.toUpperCase();if(i in u.keys){u.map[u.keys[i]]=t[e]}else{u.map[i]=t[e]}}}if(!u.bound){u.bound=true;r.bind("keydown",u.press)}},detach:function(){u.bound=false;u.map={};r.unbind("keydown",u.press)}};var h=this._controls={0:i,1:i,active:0,swap:function(){h.active=h.active?0:1},getActive:function(){return s._options.swipe?h.slides[s._active]:h[h.active]},getNext:function(){return s._options.swipe?h.slides[s.getNext(s._active)]:h[1-h.active]},slides:[],frames:[],layers:[]};var d=this._carousel={next:s.$("thumb-nav-right"),prev:s.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(s._thumbnails,function(a,r){if(r.ready){e+=r.outerWidth||t(r.container).outerWidth(true);var o=t(r.container).width();e+=o-g.floor(o);n[a+1]=e;i=g.max(i,r.outerHeight||t(r.container).outerHeight(true))}});s.$("thumbnails").css({width:e,height:i});d.max=e;d.hooks=n;d.width=s.$("thumbnails-list").width();d.setClasses();s.$("thumbnails-container").toggleClass("galleria-carousel",e>d.width);d.width=s.$("thumbnails-list").width()},bindControls:function(){var t;d.next.bind("click",function(e){e.preventDefault();if(s._options.carouselSteps==="auto"){for(t=d.current;t<d.hooks.length;t++){if(d.hooks[t]-d.hooks[d.current]>d.width){d.set(t-2);break}}}else{d.set(d.current+s._options.carouselSteps)}});d.prev.bind("click",function(e){e.preventDefault();if(s._options.carouselSteps==="auto"){for(t=d.current;t>=0;t--){if(d.hooks[d.current]-d.hooks[t]>d.width){d.set(t+2);break}else if(t===0){d.set(0);break}}}else{d.set(d.current-s._options.carouselSteps)}})},set:function(t){t=g.max(t,0);while(d.hooks[t-1]+d.width>=d.max&&t>=0){t--}d.current=t;d.animate()},getLast:function(t){return(t||d.current)-1},follow:function(t){if(t===0||t===d.hooks.length-2){d.set(t);return}var e=d.current;while(d.hooks[e]-d.hooks[d.current]<d.width&&e<=d.hooks.length){e++}if(t-1<d.current){d.set(t-1)}else if(t+2>e){d.set(t-e+d.current+2)}},setClasses:function(){d.prev.toggleClass("disabled",!d.current);d.next.toggleClass("disabled",d.hooks[d.current]+d.width>=d.max)},animate:function(e){d.setClasses();var i=d.hooks[d.current]*-1;if(isNaN(i)){return}s.$("thumbnails").css("left",function(){return t(this).css("left")});H.animate(s.get("thumbnails"),{left:i},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:false})}};var p=this._tooltip={initialized:false,open:false,timer:"tooltip"+s._id,swapTimer:"swap"+s._id,init:function(){p.initialized=true;var t=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;"+"opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";H.insertStyleTag(t,"galleria-tooltip");s.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=s.getMousePosition(t).x,i=s.getMousePosition(t).y,n=s.$("tooltip"),a=e,r=i,o=n.outerHeight(true)+1,l=n.outerWidth(true),c=o+15;var u=s.$("container").width()-l-2,h=s.$("container").height()-o-2;if(!isNaN(a)&&!isNaN(r)){a+=10;r-=o+8;a=g.max(0,g.min(u,a));r=g.max(0,g.min(h,r));if(i<c){r=c}n.css({left:a,top:r})}},bind:function(i,n){if(e.TOUCH){return}if(!p.initialized){p.init()}var a=function(){s.$("container").unbind("mousemove",p.move);s.clearTimer(p.timer);s.$("tooltip").stop().animate({opacity:0},200,function(){s.$("tooltip").hide();s.addTimer(p.swapTimer,function(){p.open=false},1e3)})};var r=function(e,i){p.define(e,i);t(e).hover(function(){s.clearTimer(p.swapTimer);s.$("container").unbind("mousemove",p.move).bind("mousemove",p.move).trigger("mousemove");p.show(e);s.addTimer(p.timer,function(){s.$("tooltip").stop().show().animate({opacity:1});p.open=true},p.open?0:500)},a).click(a)};if(typeof n==="string"){r(i in s._dom?s.get(i):i,n)}else{t.each(i,function(t,e){r(s.get(t),e)})}},show:function(e){e=t(e in s._dom?s.get(e):e);var i=e.data("tt"),a=function(t){n.setTimeout(function(t){return function(){p.move(t)}}(t),10);e.unbind("mouseup",a)};i=typeof i==="function"?i():i;if(!i){return}s.$("tooltip").html(i.replace(/\s/,"&#160;"));e.bind("mouseup",a)},define:function(e,i){if(typeof i!=="function"){var n=i;i=function(){return n}}e=t(e in s._dom?s.get(e):e).data("tt",i);p.show(e)}};var m=this._fullscreen={scrolled:0,crop:i,active:false,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:s._keyboard.map,parseCallback:function(e,i){return F.active?function(){if(typeof e=="function"){e.call(s)}var n=s._controls.getActive(),a=s._controls.getNext();s._scaleImage(a);s._scaleImage(n);if(i&&s._options.trueFullscreen){t(n.container).add(a.container).trigger("transitionend")}}:e},enter:function(t){m.beforeEnter(function(){t=m.parseCallback(t,true);if(s._options.trueFullscreen&&E.support){m.active=true;H.forceStyles(s.get("container"),{width:"100%",height:"100%"});s.rescale();if(e.MAC){if(!(e.SAFARI&&/version\/[1-5]/.test(f))){s.$("container").css("opacity",0).addClass("fullscreen");n.setTimeout(function(){m.scale();s.$("container").css("opacity",1)},50)}else{s.$("stage").css("opacity",0);n.setTimeout(function(){m.scale();s.$("stage").css("opacity",1)},4)}}else{s.$("container").addClass("fullscreen")}o.resize(m.scale);E.enter(s,t,s.get("container"))}else{m.scrolled=o.scrollTop();if(!e.TOUCH){n.scrollTo(0,0)}m._enter(t)}})},_enter:function(r){m.active=true;if(_){m.iframe=function(){var i,r=a.referrer,o=a.createElement("a"),s=n.location;o.href=r;if(o.protocol!=s.protocol||o.hostname!=s.hostname||o.port!=s.port){e.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match.");return false}m.pd=n.parent.document;t(m.pd).find("iframe").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===a){i=this;return false}});return i}()}H.hide(s.getActiveImage());if(_&&m.iframe){m.iframe.scrolled=t(n.parent).scrollTop();n.parent.scrollTo(0,0)}var l=s.getData(),c=s._options,u=!s._options.trueFullscreen||!E.support,h={height:"100%",overflow:"hidden",margin:0,padding:0};if(u){s.$("container").addClass("fullscreen");m.prev=s.$("container").prev();if(!m.prev.length){m.parent=s.$("container").parent()}s.$("container").appendTo("body");H.forceStyles(s.get("container"),{position:e.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4});H.forceStyles(b().html,h);H.forceStyles(b().body,h)}if(_&&m.iframe){H.forceStyles(m.pd.documentElement,h);H.forceStyles(m.pd.body,h);H.forceStyles(m.iframe,t.extend(h,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))}m.keymap=t.extend({},s._keyboard.map);s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev});m.crop=c.imageCrop;if(c.fullscreenCrop!=i){c.imageCrop=c.fullscreenCrop}if(l&&l.big&&l.image!==l.big){var f=new e.Picture,d=f.isCached(l.big),p=s.getIndex(),g=s._thumbnails[p];s.trigger({type:e.LOADSTART,cached:d,rewind:false,index:p,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:l});f.load(l.big,function(i){s._scaleImage(i,{complete:function(i){s.trigger({type:e.LOADFINISH,cached:d,index:p,rewind:false,imageTarget:i.image,thumbTarget:g});var n=s._controls.getActive().image;if(n){t(n).width(i.image.width).height(i.image.height).attr("style",t(i.image).attr("style")).attr("src",i.image.src)}}})})}s.rescale(function(){s.addTimer(false,function(){if(u){H.show(s.getActiveImage())}if(typeof r==="function"){r.call(s)}s.rescale()},100);s.trigger(e.FULLSCREEN_ENTER)});if(!u){H.show(s.getActiveImage())}else{o.resize(m.scale)}},scale:function(){s.rescale()},exit:function(t){m.beforeExit(function(){t=m.parseCallback(t);if(s._options.trueFullscreen&&E.support){E.exit(t)}else{m._exit(t)}})},_exit:function(t){m.active=false;var i=!s._options.trueFullscreen||!E.support,a=s.$("container").removeClass("fullscreen");if(m.parent){m.parent.prepend(a)}else{a.insertAfter(m.prev)}if(i){H.hide(s.getActiveImage());H.revertStyles(s.get("container"),b().html,b().body);if(!e.TOUCH){n.scrollTo(0,m.scrolled)}var r=s._controls.frames[s._controls.active];if(r&&r.image){r.image.src=r.image.src}}if(_&&m.iframe){H.revertStyles(m.pd.documentElement,m.pd.body,m.iframe);if(m.iframe.scrolled){n.parent.scrollTo(0,m.iframe.scrolled)}}s.detachKeyboard();s.attachKeyboard(m.keymap);s._options.imageCrop=m.crop;var l=s.getData().big,c=s._controls.getActive().image;if(!s.getData().iframe&&c&&l&&l==c.src){n.setTimeout(function(t){return function(){c.src=t}}(s.getData().image),1)}s.rescale(function(){s.addTimer(false,function(){if(i){H.show(s.getActiveImage())}if(typeof t==="function"){t.call(s)}o.trigger("resize")},50);s.trigger(e.FULLSCREEN_EXIT)});o.unbind("resize",m.scale)}};var v=this._idle={trunk:[],bound:false,active:false,add:function(e,i,n,a){if(!e){return}if(!v.bound){v.addEvent()}e=t(e);if(typeof n=="boolean"){a=n;n={}}n=n||{};var r={},o;for(o in i){if(i.hasOwnProperty(o)){r[o]=e.css(o)}}e.data("idle",{from:t.extend(r,n),to:i,complete:true,busy:false});if(!a){v.addTimer()}else{e.css(i)}v.trunk.push(e)},remove:function(e){e=t(e);t.each(v.trunk,function(t,i){if(i&&i.length&&!i.not(e).length){e.css(e.data("idle").from);v.trunk.splice(t,1)}});if(!v.trunk.length){v.removeEvent();s.clearTimer(v.timer)}},addEvent:function(){v.bound=true;s.$("container").bind("mousemove click",v.showAll);if(s._options.idleMode=="hover"){s.$("container").bind("mouseleave",v.hide)}},removeEvent:function(){v.bound=false;s.$("container").bind("mousemove click",v.showAll);if(s._options.idleMode=="hover"){s.$("container").unbind("mouseleave",v.hide)}},addTimer:function(){if(s._options.idleMode=="hover"){return}s.addTimer("idle",function(){v.hide()},s._options.idleTime)},hide:function(){if(!s._options.idleMode||s.getIndex()===false){return}s.trigger(e.IDLE_ENTER);var i=v.trunk.length;t.each(v.trunk,function(t,e){var n=e.data("idle");if(!n){return}e.data("idle").complete=false;H.animate(e,n.to,{duration:s._options.idleSpeed,complete:function(){if(t==i-1){v.active=false}}})})},showAll:function(){s.clearTimer("idle");t.each(v.trunk,function(t,e){v.show(e)})},show:function(i){var n=i.data("idle");if(!v.active||!n.busy&&!n.complete){n.busy=true;s.trigger(e.IDLE_EXIT);s.clearTimer("idle");H.animate(i,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=true;t(i).data("idle").busy=false;t(i).data("idle").complete=true}})}v.addTimer()}};var w=this._lightbox={width:0,height:0,initialized:false,active:null,image:null,elems:{},keymap:false,init:function(){if(w.initialized){return}w.initialized=true;var i="overlay box content shadow title info close prevholder prev nextholder next counter image",n={},a=s._options,r="",o="position:absolute;",l="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+a.overlayOpacity+";filter:alpha(opacity="+a.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+a.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:o+"background:#000;width:100%;height:100%;",content:o+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:o+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:o+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:o+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:o+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:o+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},u=function(e){return e.hover(function(){t(this).css("color","#bbb")},function(){t(this).css("color","#444")})},h={};if(y&&y>7){c.nextholder+="background:#000;filter:alpha(opacity=0);";c.prevholder+="background:#000;filter:alpha(opacity=0);"}t.each(c,function(t,e){r+=".galleria-"+l+t+"{"+e+"}"});r+=".galleria-"+l+"box.iframe .galleria-"+l+"prevholder,"+".galleria-"+l+"box.iframe .galleria-"+l+"nextholder{"+"width:100px;height:100px;top:50%;margin-top:-70px}";H.insertStyleTag(r,"galleria-lightbox");t.each(i.split(" "),function(t,e){s.addElement("lightbox-"+e);n[e]=w.elems[e]=s.get("lightbox-"+e)});w.image=new e.Picture;t.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(e,i){var n=[];t.each(i.split(" "),function(t,e){n.push(l+e)});h[l+e]=n});s.append(h);t(n.image).append(w.image.container);t(b().body).append(n.overlay,n.box);u(t(n.close).bind("click",w.hide).html("&#215;"));t.each(["Prev","Next"],function(i,a){var r=t(n[a.toLowerCase()]).html(/v/.test(a)?"&#8249;&#160;":"&#160;&#8250;"),o=t(n[a.toLowerCase()+"holder"]);o.bind("click",function(){w["show"+a]()});if(y<8||e.TOUCH){r.show();return}o.hover(function(){r.show()},function(t){r.stop().fadeOut(200)})});t(n.overlay).bind("click",w.hide);if(e.IPAD){s._options.lightboxTransitionSpeed=0}},rescale:function(i){var n=g.min(o.width()-40,w.width),a=g.min(o.height()-60,w.height),r=g.min(n/w.width,a/w.height),l=g.round(w.width*r)+40,c=g.round(w.height*r)+60,u={width:l,height:c,"margin-top":g.ceil(c/2)*-1,"margin-left":g.ceil(l/2)*-1};if(i){t(w.elems.box).css(u)}else{t(w.elems.box).animate(u,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var i=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:e.LIGHTBOX_IMAGE,imageTarget:i.image});t(i.container).show();t(i.image).animate({opacity:1},n);H.show(w.elems.info,n)}})}},hide:function(){w.image.image=null;o.unbind("resize",w.rescale);t(w.elems.box).hide().find("iframe").remove();H.hide(w.elems.info);s.detachKeyboard();s.attachKeyboard(w.keymap);w.keymap=false;H.hide(w.elems.overlay,200,function(){t(this).hide().css("opacity",s._options.overlayOpacity);s.trigger(e.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(i){w.active=i=typeof i==="number"?i:s.getIndex()||0;if(!w.initialized){w.init()}s.trigger(e.LIGHTBOX_OPEN);if(!w.keymap){w.keymap=t.extend({},s._keyboard.map);s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})}o.unbind("resize",w.rescale);var a=s.getData(i),r=s.getDataLength(),l=s.getNext(i),c,u,h;H.hide(w.elems.info);try{for(h=s._options.preload;h>0;h--){u=new e.Picture;c=s.getData(l);u.preload(c.big?c.big:c.image);l=s.getNext(l)}}catch(f){}w.image.isIframe=a.iframe&&!a.image;t(w.elems.box).toggleClass("iframe",w.image.isIframe);t(w.image.container).find(".galleria-videoicon").remove();w.image.load(a.big||a.image||a.iframe,function(e){if(e.isIframe){var l=t(n).width(),c=t(n).height();if(e.video&&s._options.maxVideoSize){var u=g.min(s._options.maxVideoSize/l,s._options.maxVideoSize/c);if(u<1){l*=u;c*=u}}w.width=l;w.height=c}else{w.width=e.original.width;w.height=e.original.height}t(e.image).css({width:e.isIframe?"100%":"100.1%",height:e.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%");w.elems.title.innerHTML=a.title||"";w.elems.counter.innerHTML=i+1+" / "+r;o.resize(w.rescale);w.rescale();if(a.image&&a.iframe){t(w.elems.box).addClass("iframe");if(a.video){var h=O(e.container).hide();n.setTimeout(function(){h.fadeIn(200)},200)}t(e.image).css("cursor","pointer").mouseup(function(e,i){return function(n){t(w.image.container).find(".galleria-videoicon").remove();n.preventDefault();i.isIframe=true;i.load(e.iframe+(e.video?"&autoplay=1":""),{width:"100%",height:y<8?t(w.image.container).height():"100%"})}}(a,e))}});t(w.elems.overlay).show().css("visibility","visible");t(w.elems.box).show()}};var x=this._timer={trunk:{},add:function(t,e,i,a){t=t||(new Date).getTime();a=a||false;this.clear(t);if(a){var r=e;e=function(){r();x.add(t,e,i)}}this.trunk[t]=n.setTimeout(e,i)},clear:function(t){var e=function(t){n.clearTimeout(this.trunk[t]);delete this.trunk[t]},i;if(!!t&&t in this.trunk){e.call(this,t)}else if(typeof t==="undefined"){for(i in this.trunk){if(this.trunk.hasOwnProperty(i)){e.call(this,i)}}}}};return this};e.prototype={constructor:e,init:function(n,a){a=T(a);this._original={target:n,options:a,data:null};this._target=this._dom.target=n.nodeName?n:t(n).get(0);this._original.html=this._target.innerHTML;D.push(this);if(!this._target){e.raise("Target not found",true);return}this._options={autoplay:false,carousel:true,carouselFollow:true,carouselSpeed:400,carouselSteps:"auto",clicknext:false,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:"img",dataSort:false,dataSource:this._target,debug:i,dummy:i,easing:"galleria",extend:function(t){},fullscreenCrop:i,fullscreenDoubleTap:true,fullscreenTransition:i,height:0,idleMode:true,idleTime:3e3,idleSpeed:200,imageCrop:false,imageMargin:0,imagePan:false,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:i,initialTransition:i,keepSource:false,layerFollow:true,lightbox:false,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:true,maxScaleRatio:i,maxVideoSize:i,minScaleRatio:i,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:true,popupLinks:false,preload:2,queue:true,responsive:true,show:0,showInfo:true,showCounter:true,showImagenav:true,swipe:true,thumbCrop:true,thumbEventType:"click",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:true,thumbPosition:"50%",thumbnails:true,touchTransition:i,transition:"fade",transitionInitial:i,transitionSpeed:400,trueFullscreen:true,useCanvas:false,variation:"",videoPoster:true,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}};this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial;if(a&&a.debug===false){c=false}if(a&&typeof a.imageTimeout==="number"){u=a.imageTimeout}if(a&&typeof a.dummy==="string"){h=a.dummy}if(!e.TOUCH){this._options.swipe=false}t(this._target).children().hide();if(e.QUIRK){e.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.")
}if(typeof e.theme==="object"){this._init()}else{P.push(this)}return this},_init:function(){var r=this,s=this._options;if(this._initialized){e.raise("Init failed: Gallery instance already initialized.");return this}this._initialized=true;if(!e.theme){e.raise("Init failed: No theme found.",true);return this}t.extend(true,s,e.theme.defaults,this._original.options,e.configure.options);if(s.swipe){s.clicknext=false;s.imagePan=false}!function(t){if(!("getContext"in t)){t=null;return}$=$||{elem:t,context:t.getContext("2d"),cache:{},length:0}}(a.createElement("canvas"));e.Fastclick.init(this.get("target"));this.bind(e.DATA,function(){if(n.screen&&n.screen.width&&Array.prototype.forEach){this._data.forEach(function(t){var e="devicePixelRatio"in n?n.devicePixelRatio:1,i=g.max(n.screen.width,n.screen.height);if(i*e<1024){t.big=t.image}})}this._original.data=this._data;this.get("total").innerHTML=this.getDataLength();var t=this.$("container");if(r._options.height<2){r._userRatio=r._ratio=r._options.height}var i={width:0,height:0};var a=function(){return r.$("stage").height()};H.wait({until:function(){i=r._getWH();t.width(i.width).height(i.height);return a()&&i.width&&i.height>50},success:function(){r._width=i.width;r._height=i.height;r._ratio=r._ratio||i.height/i.width;if(e.WEBKIT){n.setTimeout(function(){r._run()},1)}else{r._run()}},error:function(){if(a()){e.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+i.width+"px, height: "+i.height+"px.",true)}else{e.raise("Could not extract a stage height from the CSS. Traced height: "+a()+"px.",true)}},timeout:typeof this._options.wait=="number"?this._options.wait:false})});this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]});H.hide(this.$("counter").append(this.get("current"),a.createTextNode(" / "),this.get("total")));this.setCounter("&#8211;");H.hide(r.get("tooltip"));this.$("container").addClass((e.TOUCH?"touch":"notouch")+" "+this._options.variation);if(!this._options.swipe){t.each(new Array(2),function(i){var n=new e.Picture;t(n.container).css({position:"absolute",top:0,left:0}).prepend(r._layers[i]=t(H.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]);r.$("images").append(n.container);r._controls[i]=n;var a=new e.Picture;a.isIframe=true;t(a.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container);r._controls.frames[i]=a})}this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"});if(s.swipe){this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"});this.finger=new e.Finger(this.get("stage"),{onchange:function(t){r.setCounter(t);r.pause();r.show(t)},oncomplete:function(t){var i=g.max(0,g.min(parseInt(t,10),r.getDataLength()-1)),n=r.getData(i);if(!n){return}r.$("images").find("iframe").remove();r.$("images").find(".galleria-frame").css("opacity",0).hide();var a=r.isFullscreen()&&n.big?n.big:n.image||n.iframe,o=r._controls.slides[i],s=o.isCached(a),l=r._thumbnails[i];r.trigger({type:e.IMAGE,cached:s,index:i,imageTarget:o.image,thumbTarget:l.image,galleriaData:n});if(r._options.carousel&&r._options.carouselFollow){r._carousel.follow(i)}}});this.bind(e.RESCALE,function(){this.finger.setup()});this.$("stage").bind("click",function(e){var a=r.getData();if(!a){return}if(a.iframe){if(r.isPlaying()){r.pause()}var o=r._controls.frames[r._active],s=r._stageWidth,l=r._stageHeight;if(t(o.container).find("iframe").length){return}t(o.container).css({width:s,height:l,opacity:0}).show().animate({opacity:1},200);n.setTimeout(function(){o.load(a.iframe+(a.video?"&autoplay=1":""),{width:s,height:l},function(t){r.$("container").addClass("videoplay");t.scale({width:r._stageWidth,height:r._stageHeight,iframelimit:a.video?r._options.maxVideoSize:i})})},100);return}if(a.link){if(r._options.popupLinks){var c=n.open(a.link,"_blank")}else{n.location.href=a.link}return}});this.bind(e.IMAGE,function(e){r.setCounter(e.index);r.setInfo(e.index);var i=this.getNext(),n=this.getPrev();var a=[n,i];a.push(this.getNext(i),this.getPrev(n),r._controls.slides.length-1);var o=[];t.each(a,function(e,i){if(t.inArray(i,o)==-1){o.push(i)}});t.each(o,function(e,i){var n=r.getData(i),a=r._controls.slides[i],o=r.isFullscreen()&&n.big?n.big:n.image||n.iframe;if(n.iframe&&!n.image){a.isIframe=true}if(!a.ready){r._controls.slides[i].load(o,function(e){if(!e.isIframe){t(e.image).css("visibility","hidden")}r._scaleImage(e,{complete:function(e){if(!e.isIframe){t(e.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}}})})}})})}this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"});this.$("image-nav-right, image-nav-left").bind("click",function(t){if(s.clicknext){t.stopPropagation()}if(s.pauseOnInteraction){r.pause()}var e=/right/.test(this.className)?"next":"prev";r[e]()});t.each(["info","counter","image-nav"],function(t,e){if(s["show"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,"")]===false){H.moveOut(r.get(e.toLowerCase()))}});this.load();if(!s.keepSource&&!y){this._target.innerHTML=""}if(this.get("errors")){this.appendChild("target","errors")}this.appendChild("target","container");if(s.carousel){var l=0,c=s.show;this.bind(e.THUMBNAIL,function(){this.updateCarousel();if(++l==this.getDataLength()&&typeof c=="number"&&c>0){this._carousel.follow(c)}})}if(s.responsive){o.bind("resize",function(){if(!r.isFullscreen()){r.resize()}})}if(s.fullscreenDoubleTap){this.$("stage").bind("touchstart",function(){var t,e,i,n,a,o,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};r.$("stage").bind("touchmove",function(){t=0});return function(l){if(/(-left|-right)/.test(l.target.className)){return}o=H.timestamp();e=s(l).pageX;i=s(l).pageY;if(l.originalEvent.touches.length<2&&o-t<300&&e-n<20&&i-a<20){r.toggleFullscreen();l.preventDefault();return}t=o;n=e;a=i}}())}t.each(e.on.binds,function(e,i){if(t.inArray(i.hash,r._binds)==-1){r.bind(i.type,i.callback)}});return this},addTimer:function(){this._timer.add.apply(this._timer,H.array(arguments));return this},clearTimer:function(){this._timer.clear.apply(this._timer,H.array(arguments));return this},_getWH:function(){var e=this.$("container"),i=this.$("target"),n=this,a={},r;t.each(["width","height"],function(t,o){if(n._options[o]&&typeof n._options[o]==="number"){a[o]=n._options[o]}else{r=[H.parseValue(e.css(o)),H.parseValue(i.css(o)),e[o](),i[o]()];if(!n["_"+o]){r.splice(r.length,H.parseValue(e.css("min-"+o)),H.parseValue(i.css("min-"+o)))}a[o]=g.max.apply(g,r)}});if(n._userRatio){a.height=a.width*n._userRatio}return a},_createThumbnails:function(i){this.get("total").innerHTML=this.getDataLength();var r,o,s,l,c=this,u=this._options,h=i?this._data.length-i.length:0,f=h,d=[],p=0,g=y<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",m=function(){var t=c.$("thumbnails").find(".active");if(!t.length){return false}return t.find("img").attr("src")}(),v=typeof u.thumbnails==="string"?u.thumbnails.toLowerCase():null,b=function(t){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(o.container,null)[t]:l.css(t)},_=function(i,n,a){return function(){t(a).append(i);c.trigger({type:e.THUMBNAIL,thumbTarget:i,index:n,galleriaData:c.getData(n)})}},w=function(e){if(u.pauseOnInteraction){c.pause()}var i=t(e.currentTarget).data("index");if(c.getIndex()!==i){c.show(i)}e.preventDefault()},x=function(i,n){t(i.container).css("visibility","visible");c.trigger({type:e.THUMBNAIL,thumbTarget:i.image,index:i.data.order,galleriaData:c.getData(i.data.order)});if(typeof n=="function"){n.call(c,i)}},T=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:u.thumbCrop,margin:u.thumbMargin,canvas:u.useCanvas,position:u.thumbPosition,complete:function(e){var n=["left","top"],a=["Width","Height"],r,o,s=c.getData(e.index);t.each(a,function(i,a){r=a.toLowerCase();if(u.thumbCrop!==true||u.thumbCrop===r){o={};o[r]=e[r];t(e.container).css(o);o={};o[n[i]]=0;t(e.image).css(o)}e["outer"+a]=t(e.container)["outer"+a](true)});H.toggleQuality(e.image,u.thumbQuality===true||u.thumbQuality==="auto"&&e.original.width<e.width*3);if(u.thumbDisplayOrder&&!e.lazy){t.each(d,function(t,e){if(t===p&&e.ready&&!e.displayed){p++;e.displayed=true;x(e,i);return}})}else{x(e,i)}}})};if(!i){this._thumbnails=[];this.$("thumbnails").empty()}for(;this._data[h];h++){s=this._data[h];r=s.thumb||s.image;if((u.thumbnails===true||v=="lazy")&&(s.thumb||s.image)){o=new e.Picture(h);o.index=h;o.displayed=false;o.lazy=false;o.video=false;this.$("thumbnails").append(o.container);l=t(o.container);l.css("visibility","hidden");o.data={width:H.parseValue(b("width")),height:H.parseValue(b("height")),order:h,src:r};if(u.thumbCrop!==true){l.css({width:"auto",height:"auto"})}else{l.css({width:o.data.width,height:o.data.height})}if(v=="lazy"){l.addClass("lazy");o.lazy=true;o.load(g,{height:o.data.height,width:o.data.width})}else{o.load(r,T)}if(u.preload==="all"){o.preload(s.image)}}else if(s.iframe||v==="empty"||v==="numbers"){o={container:H.create("galleria-image"),image:H.create("img","span"),ready:true,data:{order:h}};if(v==="numbers"){t(o.image).text(h+1)}if(s.iframe){t(o.image).addClass("iframe")}this.$("thumbnails").append(o.container);n.setTimeout(_(o.image,h,o.container),50+h*20)}else{o={container:null,image:null}}t(o.container).add(u.keepSource&&u.linkSourceImages?s.original:null).data("index",h).bind(u.thumbEventType,w).data("thumbload",T);if(m===r){t(o.container).addClass("active")}this._thumbnails.push(o)}d=this._thumbnails.slice(f);return this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],a=this,r=0;t.each(n,function(e,o){if(o>a._thumbnails.length-1){return}var s=a._thumbnails[o],l=s.data,c=function(){if(++r==n.length&&typeof i=="function"){i.call(a)}},u=t(s.container).data("thumbload");if(s.video){u.call(a,s,c)}else{s.load(l.src,function(t){u.call(a,t,c)})}});return this},lazyLoadChunks:function(t,e){var i=this.getDataLength(),a=0,r=0,o=[],s=[],l=this;e=e||0;for(;a<i;a++){s.push(a);if(++r==t||a==i-1){o.push(s);r=0;s=[]}}var c=function(t){var i=o.shift();if(i){n.setTimeout(function(){l.lazyLoad(i,function(){c(true)})},e&&t?e:0)}};c(false);return this},_run:function(){var a=this;a._createThumbnails();H.wait({timeout:1e4,until:function(){if(e.OPERA){a.$("stage").css("display","inline-block")}a._stageWidth=a.$("stage").width();a._stageHeight=a.$("stage").height();return a._stageWidth&&a._stageHeight>50},success:function(){A.push(a);if(a._options.swipe){var r=a.$("images").width(a.getDataLength()*a._stageWidth);t.each(new Array(a.getDataLength()),function(i){var n=new e.Picture,o=a.getData(i);t(n.container).css({position:"absolute",top:0,left:a._stageWidth*i}).prepend(a._layers[i]=t(H.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(r);if(o.video){O(n.container)}a._controls.slides.push(n);var s=new e.Picture;s.isIframe=true;t(s.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container);a._controls.frames.push(s)});a.finger.setup()}H.show(a.get("counter"));if(a._options.carousel){a._carousel.bindControls()}if(a._options.autoplay){a.pause();if(typeof a._options.autoplay==="number"){a._playtime=a._options.autoplay}a._playing=true}if(a._firstrun){if(a._options.autoplay){a.trigger(e.PLAY)}if(typeof a._options.show==="number"){a.show(a._options.show)}return}a._firstrun=true;if(e.History){e.History.change(function(t){if(isNaN(t)){n.history.go(-1)}else{a.show(t,i,true)}})}a.trigger(e.READY);e.theme.init.call(a,a._options);t.each(e.ready.callbacks,function(t,e){if(typeof e=="function"){e.call(a,a._options)}});e.ready.callbacks=[];a._options.extend.call(a,a._options);if(/^[0-9]{1,4}$/.test(d)&&e.History){a.show(d,i,true)}else if(a._data[a._options.show]){a.show(a._options.show)}if(a._options.autoplay){a.trigger(e.PLAY)}},error:function(){e.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+a._stageWidth+"px, height: "+a._stageHeight+"px.",true)}})},load:function(i,n,a){var r=this,o=this._options;this._data=[];this._thumbnails=[];this.$("thumbnails").empty();if(typeof n==="function"){a=n;n=null}i=i||o.dataSource;n=n||o.dataSelector;a=a||o.dataConfig;if(t.isPlainObject(i)){i=[i]}if(t.isArray(i)){if(this.validate(i)){this._data=i}else{e.raise("Load failed: JSON Array not valid.")}}else{n+=",.video,.iframe";t(i).find(n).each(function(e,i){i=t(i);var n={},o=i.parent(),s=o.attr("href"),l=o.attr("rel");if(s&&(i[0].nodeName=="IMG"||i.hasClass("video"))&&I(s)){n.video=s}else if(s&&i.hasClass("iframe")){n.iframe=s}else{n.image=n.big=s}if(l){n.big=l}t.each("big title description link layer image".split(" "),function(t,e){if(i.data(e)){n[e]=i.data(e).toString()}});if(!n.big){n.big=n.image}r._data.push(t.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},n,a(i)))})}if(typeof o.dataSort=="function"){s.sort.call(this._data,o.dataSort)}else if(o.dataSort=="random"){this._data.sort(function(){return g.round(g.random())-.5})}if(this.getDataLength()){this._parseData(function(){this.trigger(e.DATA)})}return this},_parseData:function(e){var n=this,a,r=false,o=function(){var i=true;t.each(n._data,function(t,e){if(e.loading){i=false;return false}});if(i&&!r){r=true;e.call(n)}};t.each(this._data,function(e,r){a=n._data[e];if("thumb"in r===false){a.thumb=r.image}if(!r.big){a.big=r.image}if("video"in r){var s=I(r.video);if(s){a.iframe=new S(s.provider,s.id).embed()+function(){if(typeof n._options[s.provider]=="object"){var e="?",i=[];t.each(n._options[s.provider],function(t,e){i.push(t+"="+e)});if(s.provider=="youtube"){i=["wmode=opaque"].concat(i)}return e+i.join("&")}return""}();if(!a.thumb||!a.image){t.each(["thumb","image"],function(t,e){if(e=="image"&&!n._options.videoPoster){a.image=i;return}var r=new S(s.provider,s.id);if(!a[e]){a.loading=true;r.getMedia(e,function(t,e){return function(i){t[e]=i;if(e=="image"&&!t.big){t.big=t.image}delete t.loading;o()}}(a,e))}})}}}});o();return this},destroy:function(){this.$("target").data("galleria",null);this.$("container").unbind("galleria");this.get("target").innerHTML=this._original.html;this.clearTimer();H.removeFromArray(D,this);H.removeFromArray(A,this);if(e._waiters.length){t.each(e._waiters,function(t,e){if(e)n.clearTimeout(e)})}return this},splice:function(){var t=this,e=H.array(arguments);n.setTimeout(function(){s.splice.apply(t._data,e);t._parseData(function(){t._createThumbnails()})},2);return t},push:function(){var t=this,e=H.array(arguments);if(e.length==1&&e[0].constructor==Array){e=e[0]}n.setTimeout(function(){s.push.apply(t._data,e);t._parseData(function(){t._createThumbnails(e)})},2);return t},_getActive:function(){return this._controls.getActive()},validate:function(t){return true},bind:function(t,e){t=k(t);this.$("container").bind(t,this.proxy(e));return this},unbind:function(t){t=k(t);this.$("container").unbind(t);return this},trigger:function(e){e=typeof e==="object"?t.extend(e,{scope:this}):{type:k(e),scope:this};this.$("container").trigger(e);return this},addIdleState:function(t,e,i,n){this._idle.add.apply(this._idle,H.array(arguments));return this},removeIdleState:function(t){this._idle.remove.apply(this._idle,H.array(arguments));return this},enterIdleMode:function(){this._idle.hide();return this},exitIdleMode:function(){this._idle.showAll();return this},enterFullscreen:function(t){this._fullscreen.enter.apply(this,H.array(arguments));return this},exitFullscreen:function(t){this._fullscreen.exit.apply(this,H.array(arguments));return this},toggleFullscreen:function(t){this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,H.array(arguments));return this},bindTooltip:function(t,e){this._tooltip.bind.apply(this._tooltip,H.array(arguments));return this},defineTooltip:function(t,e){this._tooltip.define.apply(this._tooltip,H.array(arguments));return this},refreshTooltip:function(t){this._tooltip.show.apply(this._tooltip,H.array(arguments));return this},openLightbox:function(){this._lightbox.show.apply(this._lightbox,H.array(arguments));return this},closeLightbox:function(){this._lightbox.hide.apply(this._lightbox,H.array(arguments));return this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:i},getActiveThumb:function(){return this._thumbnails[this._active].image||i},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(e){if(this._options.imageCrop===false){return}e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,r=parseInt(e.css("left"),10),o=parseInt(e.css("top"),10),s=r||0,l=o||0,c=0,u=0,h=false,f=H.timestamp(),d=0,p=0,m=function(t,i,n){if(t>0){p=g.round(g.max(t*-1,g.min(0,i)));if(d!==p){d=p;if(y===8){e.parent()["scroll"+n](p*-1)}else{var a={};a[n.toLowerCase()]=p;e.css(a)}}}},v=function(t){if(H.timestamp()-f<50){return}h=true;n=i.getMousePosition(t).x;a=i.getMousePosition(t).y},b=function(t){if(!h){return}c=e.width()-i._stageWidth;u=e.height()-i._stageHeight;r=n/i._stageWidth*c*-1;o=a/i._stageHeight*u*-1;s+=(r-s)/i._options.imagePanSmoothness;l+=(o-l)/i._options.imagePanSmoothness;m(u,l,"Top");m(c,s,"Left")};if(y===8){e.parent().scrollTop(l*-1).scrollLeft(s*-1);e.css({top:0,left:0})}this.$("stage").unbind("mousemove",v).bind("mousemove",v);this.addTimer("pan"+i._id,b,50,true);return this},proxy:function(t,e){if(typeof t!=="function"){return m}e=e||this;return function(){return t.apply(e,H.array(arguments))}},removePan:function(){this.$("stage").unbind("mousemove");this.clearTimer("pan"+this._id);return this},addElement:function(e){var i=this._dom;t.each(H.array(arguments),function(t,e){i[e]=H.create("galleria-"+e)});return this},attachKeyboard:function(t){this._keyboard.attach.apply(this._keyboard,H.array(arguments));return this},detachKeyboard:function(){this._keyboard.detach.apply(this._keyboard,H.array(arguments));return this},appendChild:function(t,e){this.$(t).append(this.get(e)||e);return this},prependChild:function(t,e){this.$(t).prepend(this.get(e)||e);return this},remove:function(t){this.$(H.array(arguments).join(",")).remove();return this},append:function(t){var e,i;for(e in t){if(t.hasOwnProperty(e)){if(t[e].constructor===Array){for(i=0;t[e][i];i++){this.appendChild(e,t[e][i])}}else{this.appendChild(e,t[e])}}}return this},_scaleImage:function(e,i){e=e||this._controls.getActive();if(!e){return}var n,a=function(e){t(e.container).children(":first").css({top:g.max(0,H.parseValue(e.image.style.top)),left:g.max(0,H.parseValue(e.image.style.left)),width:H.parseValue(e.image.width),height:H.parseValue(e.image.height)})};i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i);if(this._options.layerFollow&&this._options.imageCrop!==true){if(typeof i.complete=="function"){n=i.complete;i.complete=function(){n.call(e,e);a(e)}}else{i.complete=a}}else{t(e.container).children(":first").css({top:0,left:0})}e.scale(i);return this},updateCarousel:function(){this._carousel.update();return this},resize:function(e,n){if(typeof e=="function"){n=e;e=i}e=t.extend({width:0,height:0},e);var a=this,r=this.$("container");t.each(e,function(t,i){if(!i){r[t]("auto");e[t]=a._getWH()[t]}});t.each(e,function(t,e){r[t](e)});return this.rescale(n)},rescale:function(n,a,r){var o=this;if(typeof n==="function"){r=n;n=i}var s=function(){o._stageWidth=n||o.$("stage").width();o._stageHeight=a||o.$("stage").height();if(o._options.swipe){t.each(o._controls.slides,function(e,i){o._scaleImage(i);t(i.container).css("left",o._stageWidth*e)});o.$("images").css("width",o._stageWidth*o.getDataLength())}else{o._scaleImage()}if(o._options.carousel){o.updateCarousel()}o._controls.frames[o._controls.active].scale({width:o._stageWidth,height:o._stageHeight,iframelimit:o._options.maxVideoSize});o.trigger(e.RESCALE);if(typeof r==="function"){r.call(o)}};s.call(o);return this},refreshImage:function(){this._scaleImage();if(this._options.imagePan){this.addPan()}return this},show:function(i,a,r){var o=this._options.swipe;if(!o&&(this._queue.length>3||i===false||!this._options.queue&&this._queue.stalled)){return}i=g.max(0,g.min(parseInt(i,10),this.getDataLength()-1));a=typeof a!=="undefined"?!!a:i<this.getIndex();r=r||false;if(!r&&e.History){e.History.set(i.toString());return}if(this.finger&&i!==this._active){this.finger.to=-(i*this.finger.width);this.finger.index=i}this._active=i;if(o){var l=this.getData(i),c=this;if(!l){return}var u=this.isFullscreen()&&l.big?l.big:l.image||l.iframe,h=this._controls.slides[i],f=h.isCached(u),d=this._thumbnails[i];var p={cached:f,index:i,rewind:a,imageTarget:h.image,thumbTarget:d.image,galleriaData:l};this.trigger(t.extend(p,{type:e.LOADSTART}));t(c._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active");c.$("container").removeClass("videoplay");var m=function(){c._layers[i].innerHTML=c.getData().layer||"";c.trigger(t.extend(p,{type:e.LOADFINISH}));c._playCheck()};n.setTimeout(function(){if(!h.ready){if(l.iframe&&!l.image){h.isIframe=true}h.load(u,function(i){c._scaleImage(i,m).trigger(t.extend(p,{type:e.IMAGE}));m()})}else{c.trigger(t.extend(p,{type:e.IMAGE}));m()}},800)}else{s.push.call(this._queue,{index:i,rewind:a});if(!this._queue.stalled){this._show()}}return this},_show:function(){var a=this,r=this._queue[0],o=this.getData(r.index);if(!o){return}var l=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,c=this._controls.getActive(),u=this._controls.getNext(),h=u.isCached(l),f=this._thumbnails[r.index],d=function(){t(u.image).trigger("mouseup")};a.$("container").toggleClass("iframe",!!o.isIframe).removeClass("videoplay");var p=function(r,o,l,c,u){return function(){var h;F.active=false;H.toggleQuality(o.image,a._options.imageQuality);a._layers[a._controls.active].innerHTML="";t(l.container).css({zIndex:0,opacity:0}).show();t(l.container).find("iframe, .galleria-videoicon").remove();t(a._controls.frames[a._controls.active].container).hide();t(o.container).css({zIndex:1,left:0,top:0}).show();a._controls.swap();if(a._options.imagePan){a.addPan(o.image)}if(r.iframe&&r.image||r.link||a._options.lightbox||a._options.clicknext){t(o.image).css({cursor:"pointer"}).bind("mouseup",function(o){if(typeof o.which=="number"&&o.which>1){return}if(r.iframe){if(a.isPlaying()){a.pause()}var s=a._controls.frames[a._controls.active],l=a._stageWidth,c=a._stageHeight;t(s.container).css({width:l,height:c,opacity:0}).show().animate({opacity:1},200);n.setTimeout(function(){s.load(r.iframe+(r.video?"&autoplay=1":""),{width:l,height:c},function(t){a.$("container").addClass("videoplay");t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:r.video?a._options.maxVideoSize:i})})},100);return}if(a._options.clicknext&&!e.TOUCH){if(a._options.pauseOnInteraction){a.pause()}a.next();return}if(r.link){if(a._options.popupLinks){h=n.open(r.link,"_blank")}else{n.location.href=r.link}return}if(a._options.lightbox){a.openLightbox()}})}a._playCheck();a.trigger({type:e.IMAGE,index:c.index,imageTarget:o.image,thumbTarget:u.image,galleriaData:r});s.shift.call(a._queue);a._queue.stalled=false;if(a._queue.length){a._show()}}}(o,u,c,r,f);if(this._options.carousel&&this._options.carouselFollow){this._carousel.follow(r.index)}if(this._options.preload){var g,m,v=this.getNext(),y;try{for(m=this._options.preload;m>0;m--){g=new e.Picture;y=a.getData(v);g.preload(this.isFullscreen()&&y.big?y.big:y.image);v=a.getNext(v)}}catch(b){}}H.show(u.container);u.isIframe=o.iframe&&!o.image;t(a._thumbnails[r.index].container).addClass("active").siblings(".active").removeClass("active");a.trigger({type:e.LOADSTART,cached:h,index:r.index,rewind:r.rewind,imageTarget:u.image,thumbTarget:f.image,galleriaData:o});a._queue.stalled=true;u.load(l,function(n){var s=t(a._layers[1-a._controls.active]).html(o.layer||"").hide();a._scaleImage(n,{complete:function(n){if("image"in c){H.toggleQuality(c.image,false)}H.toggleQuality(n.image,false);a.removePan();a.setInfo(r.index);a.setCounter(r.index);if(o.layer){s.show();if(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext){s.css("cursor","pointer").unbind("mouseup").mouseup(d)}}if(o.video&&o.image){O(n.container)}var l=a._options.transition;t.each({initial:c.image===null,touch:e.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+"Transition"]!==i){l=a._options[t+"Transition"];return false}});if(l in F.effects===false){p()}else{var u={prev:c.container,next:n.container,rewind:r.rewind,speed:a._options.transitionSpeed||400};F.active=true;F.init.call(a,l,u,p)}a.trigger({type:e.LOADFINISH,cached:h,index:r.index,rewind:r.rewind,imageTarget:n.image,thumbTarget:a._thumbnails[r.index].image,galleriaData:a.getData(r.index)})}})})},getNext:function(t){t=typeof t==="number"?t:this.getIndex();return t===this.getDataLength()-1?0:t+1},getPrev:function(t){t=typeof t==="number"?t:this.getIndex();return t===0?this.getDataLength()-1:t-1},next:function(){if(this.getDataLength()>1){this.show(this.getNext(),false)}return this},prev:function(){if(this.getDataLength()>1){this.show(this.getPrev(),true)}return this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active==="number"?this._active:false},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return typeof t==="undefined"?this._options:this._options[t]},setOptions:function(e,i){if(typeof e==="object"){t.extend(this._options,e)}else{this._options[e]=i}return this},play:function(t){this._playing=true;this._playtime=t||this._playtime;this._playCheck();this.trigger(e.PLAY);return this},pause:function(){this._playing=false;this.trigger(e.PAUSE);return this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,i=0,n=20,a=H.timestamp(),r="play"+this._id;if(this._playing){this.clearTimer(r);var o=function(){i=H.timestamp()-a;if(i>=t._playtime&&t._playing){t.clearTimer(r);t.next();return}if(t._playing){t.trigger({type:e.PROGRESS,percent:g.ceil(i/t._playtime*100),seconds:g.floor(i/1e3),milliseconds:i});t.addTimer(r,o,n)}};t.addTimer(r,o,n)}},setPlaytime:function(t){this._playtime=t;return this},setIndex:function(t){this._active=t;return this},setCounter:function(t){if(typeof t==="number"){t++}else if(typeof t==="undefined"){t=this.getIndex()+1}this.get("current").innerHTML=t;if(y){var e=this.$("counter"),i=e.css("opacity");if(parseInt(i,10)===1){H.removeAlpha(e[0])}else{this.$("counter").css("opacity",i)}}return this},setInfo:function(e){var i=this,n=this.getData(e);t.each(["title","description"],function(t,e){var a=i.$("info-"+e);if(!!n[e]){a[n[e].length?"show":"hide"]().html(n[e])}else{a.empty().hide()}});return this},hasInfo:function(t){var e="title description".split(" "),i;for(i=0;e[i];i++){if(!!this.getData(t)[e[i]]){return true}}return false},jQuery:function(e){var i=this,n=[];t.each(e.split(","),function(e,a){a=t.trim(a);if(i.get(a)){n.push(a)}});var a=t(i.get(n.shift()));t.each(n,function(t,e){a=a.add(i.get(e))});return a},$:function(t){return this.jQuery.apply(this,H.array(arguments))}};t.each(x,function(t,i){var n=/_/.test(i)?i.replace(/_/g,""):i;e[i.toUpperCase()]="galleria."+n});t.extend(e,{IE9:y===9,IE8:y===8,IE7:y===7,IE6:y===6,IE:y,WEBKIT:/webkit/.test(f),CHROME:/chrome/.test(f),SAFARI:/safari/.test(f)&&!/chrome/.test(f),QUIRK:y&&a.compatMode&&a.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!n.opera,IPHONE:/iphone/.test(f),IPAD:/ipad/.test(f),ANDROID:/android/.test(f),TOUCH:"ontouchstart"in a});e.addTheme=function(i){if(!i.name){e.raise("No theme name specified")}if(typeof i.defaults!=="object"){i.defaults={}}else{i.defaults=T(i.defaults)}var a=false,r;if(typeof i.css==="string"){t("link").each(function(t,e){r=new RegExp(i.css);if(r.test(e.href)){a=true;z(i);return false}});if(!a){t(function(){t("script").each(function(t,e){r=new RegExp("galleria\\."+i.name.toLowerCase()+"\\.");if(r.test(e.src)){a=e.src.replace(/[^\/]*$/,"")+i.css;n.setTimeout(function(){H.loadCSS(a,"galleria-theme",function(){z(i)})},1)}});if(!a){e.raise("No theme CSS loaded")}})}}else{z(i)}return i};e.loadTheme=function(i,a){if(t("script").filter(function(){return t(this).attr("src")==i}).length){return}var r=false,o;t(n).load(function(){if(!r){o=n.setTimeout(function(){if(!r&&!e.theme){e.raise("Galleria had problems loading theme at "+i+". Please check theme path or load manually.",true)}},2e4)}});e.unloadTheme();H.loadScript(i,function(){r=true;n.clearTimeout(o)});return e};e.unloadTheme=function(){if(typeof e.theme=="object"){t("script").each(function(i,n){if(new RegExp("galleria\\."+e.theme.name+"\\.").test(n.src)){t(n).remove()}});e.theme=i}return e};e.get=function(t){if(!!D[t]){return D[t]}else if(typeof t!=="number"){return D}else{e.raise("Gallery index "+t+" not found")}};e.configure=function(i,n){var a={};if(typeof i=="string"&&n){a[i]=n;i=a}else{t.extend(a,i)}e.configure.options=a;t.each(e.get(),function(t,e){e.setOptions(a)});return e};e.configure.options={};e.on=function(i,n){if(!i){return}n=n||m;var a=i+n.toString().replace(/\s/g,"")+H.timestamp();t.each(e.get(),function(t,e){e._binds.push(a);e.bind(i,n)});e.on.binds.push({type:i,callback:n,hash:a});return e};e.on.binds=[];e.run=function(i,n){if(t.isFunction(n)){n={extend:n}}t(i||"#galleria").galleria(n);return e};e.addTransition=function(t,i){F.effects[t]=i;return e};e.utils=H;e.log=function(){var e=H.array(arguments);if("console"in n&&"log"in n.console){try{return n.console.log.apply(n.console,e)}catch(i){t.each(e,function(){n.console.log(this)})}}else{return n.alert(e.join("<br>"))}};e.ready=function(i){if(typeof i!="function"){return e}t.each(A,function(t,e){i.call(e,e._options)});e.ready.callbacks.push(i);return e};e.ready.callbacks=[];e.raise=function(e,i){var n=i?"Fatal error":"Error",a={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},r=function(e){var r='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+n+": </strong>":"")+e+"</div>";t.each(D,function(){var t=this.$("errors"),e=this.$("target");if(!t.length){e.css("position","relative");t=this.addElement("errors").appendChild("target","errors").$("errors").css(a)}t.append(r)});if(!D.length){t("<div>").css(t.extend(a,{position:"fixed"})).append(r).appendTo(b().body)}};if(c){r(e);if(i){throw new Error(n+": "+e)}}else if(i){if(L){return}L=true;i=false;r("Gallery could not load.")}};e.version=l;e.requires=function(t,i){i=i||"You need to upgrade Galleria to version "+t+" to use one or more components.";if(e.version<t){e.raise(i,true)}return e};e.Picture=function(e){this.id=e||null;this.image=null;this.container=H.create("galleria-image");t(this.container).css({overflow:"hidden",position:"relative"});this.original={width:0,height:0};this.ready=false;this.isIframe=false};e.Picture.prototype={cache:{},show:function(){H.show(this.image)
},hide:function(){H.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr("src",e)},load:function(i,a,r){if(typeof a=="function"){r=a;a=null}if(this.isIframe){var o="if"+(new Date).getTime();var s=this.image=t("<iframe>",{src:i,frameborder:0,id:o,allowfullscreen:true,css:{visibility:"hidden"}})[0];if(a){t(s).css(a)}t(this.container).find("iframe,img").remove();this.container.appendChild(this.image);t("#"+o).load(function(e,i){return function(){n.setTimeout(function(){t(e.image).css("visibility","visible");if(typeof i=="function"){i.call(e,e)}},10)}}(this,r));return this.container}this.image=new Image;if(e.IE8){t(this.image).css("filter","inherit")}var l=false,c=false,u=t(this.container),f=t(this.image),d=function(){if(!l){l=true;n.setTimeout(function(t,e){return function(){t.attr("src",e+"?"+H.timestamp())}}(t(this),i),50)}else{if(h){t(this).attr("src",h)}else{e.raise("Image not found: "+i)}}},p=function(i,r,o){return function(){var s=function(){t(this).unbind("load");i.original=a||{height:this.height,width:this.width};if(e.HAS3D){this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"}u.append(this);i.cache[o]=o;if(typeof r=="function"){n.setTimeout(function(){r.call(i,i)},1)}};if(!this.width||!this.height){n.setTimeout(function(i){return function(){if(i.width&&i.height){s.call(i)}else{if(!c){t(new Image).load(p).attr("src",i.src);c=true}else{e.raise("Could not extract width/height from image: "+i.src+". Traced measures: width:"+i.width+"px, height: "+i.height+"px.")}}}}(this),2)}else{s.call(this)}}}(this,r,i);u.find("iframe,img").remove();f.css("display","block");H.hide(this.image);t.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){f.css(e,/min/.test(e)?"0":"none")});f.load(p).bind("error",d).attr("src",i);return this.container},scale:function(n){var a=this;n=t.extend({width:0,height:0,min:i,max:i,margin:0,complete:m,position:"center",crop:false,canvas:false,iframelimit:i},n);if(this.isIframe){var r=n.width,o=n.height,s,l;if(n.iframelimit){var c=g.min(n.iframelimit/r,n.iframelimit/o);if(c<1){s=r*c;l=o*c;t(this.image).css({top:o/2-l/2,left:r/2-s/2,position:"absolute"})}else{t(this.image).css({top:0,left:0})}}t(this.image).width(s||r).height(l||o).removeAttr("width").removeAttr("height");t(this.container).width(r).height(o);n.complete.call(a,a);try{if(this.image.contentWindow){t(this.image.contentWindow).trigger("resize")}}catch(u){}return this.container}if(!this.image){return this.container}var h,f,d=t(a.container),p;H.wait({until:function(){h=n.width||d.width()||H.parseValue(d.css("width"));f=n.height||d.height()||H.parseValue(d.css("height"));return h&&f},success:function(){var e=(h-n.margin*2)/a.original.width,i=(f-n.margin*2)/a.original.height,r=g.min(e,i),o=g.max(e,i),s={"true":o,width:e,height:i,"false":r,landscape:a.original.width>a.original.height?o:r,portrait:a.original.width<a.original.height?o:r},l=s[n.crop.toString()],c="";if(n.max){l=g.min(n.max,l)}if(n.min){l=g.max(n.min,l)}t.each(["width","height"],function(e,i){t(a.image)[i](a[i]=a.image[i]=g.round(a.original[i]*l))});t(a.container).width(h).height(f);if(n.canvas&&$){$.elem.width=a.width;$.elem.height=a.height;c=a.image.src+":"+a.width+"x"+a.height;a.image.src=$.cache[c]||function(t){$.context.drawImage(a.image,0,0,a.original.width*l,a.original.height*l);try{p=$.elem.toDataURL();$.length+=p.length;$.cache[t]=p;return p}catch(e){return a.image.src}}(c)}var u={},d={},m=function(e,i,n){var r=0;if(/\%/.test(e)){var o=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();r=g.ceil(s*-1*o+n*o)}else{r=H.parseValue(e)}return r},v={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};t.each(n.position.toLowerCase().split(" "),function(t,e){if(e==="center"){e="50%"}u[t?"top":"left"]=e});t.each(u,function(e,i){if(v.hasOwnProperty(i)){t.extend(d,v[i])}});u=u.top?t.extend(u,d):d;u=t.extend({top:"50%",left:"50%"},u);t(a.image).css({position:"absolute",top:m(u.top,"height",f),left:m(u.left,"width",h)});a.show();a.ready=true;n.complete.call(a,a)},error:function(){e.raise("Could not scale image: "+a.image.src)},timeout:1e3});return this}};t.extend(t.easing,{galleria:function(t,e,i,n,a){if((e/=a/2)<1){return n/2*e*e*e+i}return n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}});e.Fastclick=function(){var i=/iP(ad|hone|od)/.test(navigator.userAgent),r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);return{init:function(i){var a,r=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.layer=i;t.each(["Click","TouchStart","TouchMove","TouchEnd","TouchCancel"],function(t,e){r["on"+e]=function(t){return function(){t.apply(r,arguments)}}(r["on"+e])});if(!e.TOUCH){return}i.addEventListener("click",this.onClick,true);i.addEventListener("touchstart",this.onTouchStart,false);i.addEventListener("touchmove",this.onTouchMove,false);i.addEventListener("touchend",this.onTouchEnd,false);i.addEventListener("touchcancel",this.onTouchCancel,false);if(!n.Event.prototype.stopImmediatePropagation){i.removeEventListener=function(t,e,a){var r=n.Node.prototype.removeEventListener;if(t==="click"){r.call(i,t,e.hijacked||e,a)}else{r.call(i,t,e,a)}};i.addEventListener=function(t,e,a){var r=n.Node.prototype.addEventListener;if(t==="click"){r.call(i,t,e.hijacked||(e.hijacked=function(t){if(!t.propagationStopped){e(t)}}),a)}else{r.call(i,t,e,a)}}}if(typeof i.onclick==="function"){a=i.onclick;i.addEventListener("click",function(t){a(t)},false);i.onclick=null}},sendClick:function(t,e){var i,r;if(a.activeElement&&a.activeElement!==t){a.activeElement.blur()}r=e.changedTouches[0];i=a.createEvent("MouseEvents");i.initMouseEvent("click",true,true,n,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null);i.forwardedTouchEvent=true;t.dispatchEvent(i)},onTouchStart:function(t){var e,a,o;e=t.target;a=t.targetTouches[0];if(i){o=n.getSelection();if(o.rangeCount&&!o.isCollapsed){return true}if(!r){if(a.identifier===this.lastTouchIdentifier){t.preventDefault();return false}this.lastTouchIdentifier=a.identifier}}this.trackingClick=true;this.trackingClickStart=t.timeStamp;this.targetElement=e;this.touchStartX=a.pageX;this.touchStartY=a.pageY;if(t.timeStamp-this.lastClickTime<200){t.preventDefault()}return true},touchHasMoved:function(t){var e=t.targetTouches[0];if(g.abs(e.pageX-this.touchStartX)>10||g.abs(e.pageY-this.touchStartY)>10){return true}return false},onTouchMove:function(t){if(!this.trackingClick){return true}if(this.targetElement!==t.target||this.touchHasMoved(t)){this.trackingClick=false;this.targetElement=null}return true},onTouchEnd:function(t){var e,i,r,s=this.targetElement;if(!this.trackingClick){return true}if(t.timeStamp-this.lastClickTime<200){this.cancelNextClick=true;return true}this.lastClickTime=t.timeStamp;e=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(o){r=t.changedTouches[0];s=t.target;s=a.elementFromPoint(r.pageX-n.pageXOffset,r.pageY-n.pageYOffset)}i=s.tagName.toLowerCase();t.preventDefault();this.sendClick(s,t);return false},onTouchCancel:function(){this.trackingClick=false;this.targetElement=null},onClick:function(t){var e;if(!this.targetElement){return true}if(t.forwardedTouchEvent){return true}e=this.targetElement;this.targetElement=null;if(this.trackingClick){this.trackingClick=false;return true}if(!t.cancelable){return true}if(this.cancelNextClick){this.cancelNextClick=false;if(t.stopImmediatePropagation){t.stopImmediatePropagation()}else{t.propagationStopped=true}t.stopPropagation();t.preventDefault();return false}return true}}}();e.Finger=function(){var i=g.abs;var o=e.HAS3D=function(){var e=a.createElement("p"),i,n=["webkit","O","ms","Moz",""],r,o=0,s="transform";b().html.insertBefore(e,null);for(;n[o];o++){r=n[o]?n[o]+"Transform":s;if(e.style[r]!==undefined){e.style[r]="translate3d(1px,1px,1px)";i=t(e).css(n[o]?"-"+n[o].toLowerCase()+"-"+s:s)}}b().html.removeChild(e);return i!==undefined&&i.length>0&&i!=="none"}();var s=function(){var t="RequestAnimationFrame";return n.requestAnimationFrame||n["webkit"+t]||n["moz"+t]||n["o"+t]||n["ms"+t]||function(t){n.setTimeout(t,1e3/60)}}();var l=function(e,i){this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}};if(!e.children.length){return}var a=this;t.extend(this.config,i);this.elem=e;this.child=e.children[0];this.to=this.pos=0;this.touching=false;this.start={};this.index=this.config.start;this.anim=0;if(!o){this.child.style.position="absolute";this.elem.style.position="relative"}t.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(t,e){a[e]=function(t){return function(){t.apply(a,arguments)}}(a[e])});this.setX=function(){var t=a.child.style;if(!o){t.left=a.pos+"px";return}t.MozTransform=t.webkitTransform="translate3d("+a.pos+"px,0,0)";return};t(e).bind("touchstart",this.ontouchstart);t(n).bind("resize",this.setup);t(n).bind("orientationchange",this.setup);this.setup();!function r(){s(r);a.loop.call(a)}()};l.prototype={constructor:l,setup:function(){this.width=t(this.elem).width();this.length=g.ceil(t(this.child).width()/this.width);if(this.index!==0){this.index=g.max(0,g.min(this.index,this.length-1));this.pos=this.to=-this.width*this.index}},setPosition:function(t){this.pos=t;this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date};this.isScrolling=null;this.touching=true;this.deltaX=0;r.bind("touchmove",this.ontouchmove);r.bind("touchend",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;if(e&&e.length>1||t.scale&&t.scale!==1){return}this.deltaX=e[0].pageX-this.start.pageX;if(this.isScrolling===null){this.isScrolling=!!(this.isScrolling||i(this.deltaX)<i(e[0].pageY-this.start.pageY))}if(!this.isScrolling){t.preventDefault();this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?i(this.deltaX)/this.width+1.8:1;this.to=this.deltaX-this.index*this.width}t.stopPropagation()},ontouchend:function(t){this.touching=false;var e=+new Date-this.start.time<250&&i(this.deltaX)>40||i(this.deltaX)>this.width/2,n=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;if(!this.isScrolling){this.show(this.index+(e&&!n?this.deltaX<0?1:-1:0))}r.unbind("touchmove",this.ontouchmove);r.unbind("touchend",this.ontouchend)},show:function(t){if(t!=this.index){this.config.onchange.call(this,t)}else{this.to=-(t*this.width)}},moveTo:function(t){if(t!=this.index){this.pos=this.to=-(t*this.width);this.index=t}},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t){e=g.max(.5,g.min(2,g.abs(t/this.width)))}if(this.touching||i(t)<=1){this.pos=this.to;if(this.anim){this.config.oncomplete(this.index)}this.anim=0}else{if(!this.anim){this.anim={v:this.pos,c:t,t:+new Date,f:e}}this.pos=this.config.easing(null,+new Date-this.anim.t,this.anim.v,this.anim.c,this.config.duration*this.anim.f)}this.setX()}};return l}();t.fn.galleria=function(i){var n=this.selector;if(!t(this).length){t(function(){if(t(n).length){t(n).galleria(i)}else{e.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(i)},error:function(){e.raise('Init failed: Galleria could not find the element "'+n+'".')},timeout:5e3})}});return this}return this.each(function(){if(t.data(this,"galleria")){t.data(this,"galleria").destroy();t(this).find("*").hide()}t.data(this,"galleria",(new e).init(this,i))})}}(jQuery);